### ChatBot (cont.)


#### Prologue 
> "“These stone walls, I know it only too well, are steeped in human suffering. I’ve never been able to look at them without a shudder. And yet-believe me, I am speaking from the depths of my heart —I know that even the wretchedest amongst you have sometimes seen, taking form against that grayness, a divine face. It’s that face you are asked to see.”" <br />--- The Stranger by Albert Camus"


#### I. Storing vector embedding in Oracle 19c
```
CREATE OR REPLACE TYPE float_array_384 AS VARRAY(384) OF BINARY_FLOAT;

CREATE TABLE vec_items (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY,
    document VARCHAR2(1024),
    embedding float_array_384
);

INSERT INTO vec_items (document, embedding) VALUES ('testing', float_array(1.1, 1.2, 1.3, 1.4));
```


#### II. Embedding the data 
```
```

#### III. Searching the data 
```
CREATE OR REPLACE FUNCTION cosine_similarity(
  array1 IN float_array_384,
  array2 IN float_array_384
) RETURN BINARY_FLOAT IS
  dot_product BINARY_FLOAT := 0;
  norm_a BINARY_FLOAT := 0;
  norm_b BINARY_FLOAT := 0;
  similarity BINARY_FLOAT;
BEGIN
  IF array1.COUNT != array2.COUNT THEN
    RAISE_APPLICATION_ERROR(-20001, 'Arrays must be of the same length');
  END IF;

  FOR i IN 1 .. array1.COUNT LOOP
    dot_product := dot_product + (array1(i) * array2(i));
    norm_a := norm_a + (array1(i) * array1(i));
    norm_b := norm_b + (array2(i) * array2(i));
  END LOOP;

  IF norm_a = 0 OR norm_b = 0 THEN
    RETURN 0;
  ELSE
    similarity := dot_product / (SQRT(norm_a) * SQRT(norm_b));
    RETURN similarity;
  END IF;
END cosine_similarity;
/
```


#### IV. Summary 


#### V. Bibliography
1. [node-llama-cpp](https://www.npmjs.com/package/node-llama-cpp)
2. [Alex Garcia's Blog](https://alexgarcia.xyz/blog/)
3. [oracledb](https://www.npmjs.com/package/oracledb)
4. [The Stranger by Albert Camus](https://www.macobo.com/essays/epdf/CAMUS,%20Albert%20-%20The%20Stranger.pdf)


#### Epilogue
> "And I, too, felt ready to start life all over again. It was as if that great rush of anger had washed me clean, emptied me of hope, and, gazing up at the dark sky spangled with its signs and stars, for the first time, the first, I laid my heart open to the benign indifference of the universe." <br />--- The Stranger by Albert Camus"


### EOF (2025/03/28)
